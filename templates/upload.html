<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Student Clinic - Upload Student CSV</title>
    <style>
        body { 
            font-family: 'Segoe UI', Arial, sans-serif; 
            background: linear-gradient(135deg, #eaf6fb 0%, #f5e6fa 100%); 
            margin: 0; 
            min-height: 100vh;
            padding-bottom: 60px;
        }
        .navbar { 
            background: linear-gradient(90deg, #1976d2 60%, #8e24aa 100%); 
            color: white; 
            padding: 25px 0; 
            text-align: center; 
            font-size: 2.2em; 
            letter-spacing: 3px; 
            box-shadow: 0 4px 12px #b3c6e7; 
        }
        .nav-links { 
            text-align: center; 
            margin: 20px 0; 
            padding: 15px;
        }
        .nav-link { 
            display: inline-block; 
            margin: 0 15px; 
            color: #1976d2; 
            background: #fff; 
            border-radius: 8px; 
            padding: 12px 24px; 
            text-decoration: none; 
            font-weight: 600; 
            border: 2px solid #1976d2; 
            transition: all 0.3s; 
            font-size: 1.1em;
        }
        .nav-link:hover { 
            background: #1976d2; 
            color: #fff; 
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        .container { 
            display: flex; 
            flex-direction: column;
            justify-content: center; 
            align-items: center; 
            min-height: 75vh; 
            padding: 40px 20px;
        }
        .upload-section {
            background: white;
            padding: 50px 40px;
            border-radius: 20px;
            box-shadow: 0px 0px 25px rgba(179, 198, 231, 0.6);
            width: 500px;
            max-width: 90vw;
            margin-bottom: 40px;
        }
        h2 { 
            text-align: center; 
            margin-bottom: 15px; 
            color: #1976d2; 
            font-size: 2.2em;
            letter-spacing: 1px;
        }
        .datetime { 
            text-align: center; 
            color: #666; 
            margin-bottom: 30px; 
            font-size: 1.1em; 
            font-weight: 500;
        }
        .instructions {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 25px;
            border-left: 4px solid #1976d2;
        }
        .instructions h3 {
            color: #1976d2;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        .instructions ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        .instructions li {
            margin: 8px 0;
            color: #555;
            line-height: 1.4;
        }
        .alert { 
            color: #b94a48; 
            background: #f2dede; 
            border: 2px solid #eed3d7; 
            padding: 15px; 
            border-radius: 8px; 
            margin-bottom: 20px; 
            text-align: center; 
            font-weight: 500;
        }
        .file-input-wrapper {
            position: relative;
            margin: 20px 0 25px 0;
        }
        input[type="file"] { 
            width: 100%; 
            padding: 15px; 
            border: 2px dashed #1976d2;
            border-radius: 10px;
            background: #f8f9fa;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s;
        }
        input[type="file"]:hover {
            background: #e3f2fd;
            border-color: #8e24aa;
        }
        button { 
            width: 100%; 
            padding: 18px; 
            background: linear-gradient(90deg, #1976d2 60%, #8e24aa 100%); 
            color: white; 
            border: none; 
            border-radius: 10px; 
            cursor: pointer; 
            font-size: 1.2em; 
            font-weight: 600; 
            letter-spacing: 1px; 
            transition: all 0.3s; 
            margin-top: 10px;
        }
        button:hover { 
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }
        .template-link { 
            display: block; 
            text-align: center; 
            margin: 20px 0; 
            color: #1976d2; 
            text-decoration: none; 
            font-size: 1.1em; 
            font-weight: 600;
            padding: 12px 20px;
            border: 2px solid #1976d2;
            border-radius: 8px;
            transition: all 0.3s;
        }
        .template-link:hover { 
            background: #1976d2;
            color: white;
        }
        .info-section {
            background: white;
            padding: 40px;
            border-radius: 15px;
            margin: 30px 0;
            text-align: center;
            max-width: 800px;
            width: 100%;
            box-shadow: 0px 0px 20px rgba(179, 198, 231, 0.4);
        }
        .info-section h3 {
            color: #1976d2;
            font-size: 1.5em;
            margin-bottom: 20px;
        }
        .info-section p {
            color: #666;
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }
        .feature {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #e3f2fd;
        }
        .feature h4 {
            color: #8e24aa;
            margin-bottom: 10px;
        }
        .footer { 
            text-align: center; 
            color: #888; 
            font-size: 1.1em; 
            margin-top: 60px; 
            padding: 30px;
            background: rgba(255,255,255,0.9);
            border-radius: 10px;
            max-width: 800px;
            width: 100%;
        }
    </style>
</head>
<body>
    <div class="navbar">üè• Student Mental Health Clinic</div>
    <div class="nav-links">
        <a class="nav-link" href="/upload">üì§ Upload Data</a>
        {% if session['username'] == 'admin' %}
        <a class="nav-link" href="/dashboard">üìä Admin Dashboard</a>
        {% endif %}
        <a class="nav-link" href="/logout">üö™ Sign Out</a>
    </div>
    <div class="container">
      <div class="upload-section">
        <h2>üìÅ Upload Student Data</h2>
        <div class="datetime">üìÖ {{ current_time }}</div>
        
        <div class="instructions">
            <h3>üìã Upload Instructions</h3>
            <ul>
                <li>üìä Upload a CSV file containing student data</li>
                <li>üîç Ensure all required columns are present and properly formatted</li>
                <li>üìù Use the template below if you're unsure about the format</li>
                <li>üö´ Do not include a "Depression" column - this will be predicted</li>
                <li>‚úÖ Each row should represent one student's data</li>
            </ul>
        </div>
        
        {% with messages = get_flashed_messages() %}
          {% if messages %}
            <div class="alert">‚ö†Ô∏è {{ messages[0] }}</div>
          {% endif %}
        {% endwith %}
        
        <form method="POST" enctype="multipart/form-data">
            <div class="file-input-wrapper">
                <input type="file" name="file" accept=".csv" required>
            </div>
            <button type="submit">üöÄ Upload & Generate Predictions</button>
        </form>
        
        <a class="template-link" href="/student_depression_template.csv" download>
            üì• Download CSV Template
        </a>
      </div>
      
      <div class="info-section">
        <h3>üî¨ How Our AI Prediction Works</h3>
        <p>Our advanced machine learning system analyzes multiple factors to predict depression risk in students. The AI model has been trained on validated psychological and behavioral indicators.</p>
        
        <div class="features">
            <div class="feature">
                <h4>üß† Multi-Factor Analysis</h4>
                <p>Analyzes sleep patterns, stress levels, academic performance, and social factors</p>
            </div>
            <div class="feature">
                <h4>‚ö° Real-Time Processing</h4>
                <p>Get instant predictions with confidence scores for each student</p>
            </div>
            <div class="feature">
                <h4>üìà Continuous Learning</h4>
                <p>Model automatically improves with new data and feedback</p>
            </div>
            <div class="feature">
                <h4>üîí Privacy Protected</h4>
                <p>All data is processed securely with full anonymization</p>
            </div>
        </div>
      </div>
      
      <div class="footer">
        <p>üè• &copy; {{ current_time[:4] }} Student Mental Health Clinic. All rights reserved.</p>
        <p>ü§ñ AI-Powered Depression Prediction | üõ°Ô∏è Secure & Confidential | üìû Support: clinic@university.edu</p>
      </div>
    </div>
</body>
</html>
